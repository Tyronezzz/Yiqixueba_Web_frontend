<html>
<head>
    <meta charset="UTF-8">
    <title>editor</title>

    <link rel="stylesheet" type="text/css" href="../../../static/css/wangEditor.min.css">
    <script type="text/javascript" src="../../../static/js/jquery-3.1.0.min.js"></script>
    <script type="text/javascript" src="../../../static/js/wangEditor.js"></script>
    <!--<script type="text/javascript" src="../dist/js/wangEditor.min.js"></script>-->
    <link rel="stylesheet" href="../../../static/css/bootstrap.min.css">
    <link href="../../../static/css/bootstrap.min.css" rel="stylesheet" type="text/css">
    <script type="text/javascript" src="../../../static/js/bootstrap.min.js"></script>
    <link rel="stylesheet" href="../../../static/css/bootstrap-tagsinput.css">
    <link rel="stylesheet" href="../../../static/css/app.css">
    <script src="../../../static/js/bootstrap-tagsinput.min.js"></script>



    <style type="text/css">
        #editor-trigger {
            height: 500px;

            /*max-height: 500px;*/
        }
        .container {
            width: 100%;
            margin: 0 auto;
            text-align:center;
            position: relative;
        }

    </style>
</head>
<body style="padding:0 20px;">
<div>

<p id="name" style="padding-left: 110px;">写文章</p>
<hr style="color:grey; size:0.001"/>

<form id="article" role="form" action="" method="post" onsubmit="return handin()">

    <div class="container">
        <div class="row">
            <div >
                <div class="col-xs-13" style="">
                    <input type="text"  id="title" name='title' class="form-control" placeholder="标题"  value="">
                </div>

                <div  class="" style="padding-left: 0;padding-right: 0;padding-top: 20px;width: auto;">
                    <!--<div id="editor-trigger" style="" ><p id="context" name="context"></p></div>-->
                    <!--<input type="text" style="" id="context" name='context' class="form-control" placeholder="内容"  value="" width="100dp" height="80dp">-->
                    <textarea id="context" style="height:430px" name="context"></textarea>

                </div>

                <div class="container form-group" style="padding-top: 10px; padding-left: 0;">
                    <div class="col-xs-5" style="padding-left: 0;">
                        <input type="text" name="tags" value="#" data-role="tagsinput" />
                    </div>
                </div>


                <div style="display: block;">

                    <div style="text-align: left; font-size: small;color:grey;">添加恰当的标签，能让更多擅长此类问题的大咖来回答。每个问题最多可添加5个标签。</div>
                    <div style="float: right ;padding-right: 2%">
                        <button class="btn btn-success btn-lg" id="hdin" onsubmit="return handin()" type="button submit" href="##" target="_blank">发布文章</button>
                    </div>
                </div>

            </div>
        </div>
    </div>
</form>
</div>
    <script type="text/javascript">




        var editor = new wangEditor('context');
        editor.config.uploadImgUrl = '/upload';
        editor.config.uploadParams = {};
        editor.config.uploadHeaders = {};
        // editor.config.uploadImgFileName = 'myFileName';

        // 隐藏网络图片
        // editor.config.hideLinkImg = true;

        // 表情显示项
        editor.config.emotionsShow = 'value';
        editor.config.emotions = {
            'default': {
                title: '默认',
                data: './emotions.data'
            },
            'weibo': {
                title: '微博表情',
                data: [
                    {
                        icon: 'http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/7a/shenshou_thumb.gif',
                        value: '[草泥马]'
                    },
                    {
                        icon: 'http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/60/horse2_thumb.gif',
                        value: '[神马]'
                    },
                    {
                        icon: 'http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/bc/fuyun_thumb.gif',
                        value: '[浮云]'
                    },
                    {
                        icon: 'http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/c9/geili_thumb.gif',
                        value: '[给力]'
                    },
                    {
                        icon: 'http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/f2/wg_thumb.gif',
                        value: '[围观]'
                    },
                    {
                        icon: 'http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/70/vw_thumb.gif',
                        value: '[威武]'
                    }
                ]
            }
        };

        // 插入代码时的默认语言
        // editor.config.codeDefaultLang = 'html'

        // 只粘贴纯文本
        // editor.config.pasteText = true;

        // 跨域上传
        // editor.config.uploadImgUrl = 'http://localhost:8012/upload';

        // 第三方上传
        // editor.config.customUpload = true;

        // 普通菜单配置
        // editor.config.menus = [
        //     'img',
        //     'insertcode',
        //     'eraser',
        //     'fullscreen'
        // ];
        // 只排除某几个菜单（兼容IE低版本，不支持ES5的浏览器），支持ES5的浏览器可直接用 [].map 方法
        // editor.config.menus = $.map(wangEditor.config.menus, function(item, key) {
        //     if (item === 'insertcode') {
        //         return null;
        //     }
        //     if (item === 'fullscreen') {
        //         return null;
        //     }
        //     return item;
        // });

        // onchange 事件
        // editor.onchange = function () {
        //     console.log(this.$txt.html());
        // };

        // 取消过滤js
        // editor.config.jsFilter = false;

        // 取消粘贴过来
        // editor.config.pasteFilter = false;

        // 设置 z-index
        // editor.config.zindex = 20000;

        // 语言
        // editor.config.lang = wangEditor.langs['en'];

        // 自定义菜单UI
        // editor.UI.menus.bold = {
        //     normal: '<button style="font-size:20px; margin-top:5px;">B</button>',
        //     selected: '.selected'
        // };
        // editor.UI.menus.italic = {
        //     normal: '<button style="font-size:20px; margin-top:5px;">I</button>',
        //     selected: '<button style="font-size:20px; margin-top:5px;"><i>I</i></button>'
        // };

        editor.create();

        $("#hdin").attr("disabled", true);
        function checkvalid()
        {
            var nm = document.getElementById("title");
            var cnt = document.getElementById("context");
            var text = editor.$txt.text();

            if(text!="" && nm.value!="")
             {
                 document.getElementById("hdin").disabled= false;
                 return true;
             }

             else
             {

                 $("#hdin").attr("disabled", true);
                 return false;
             }


        }

        setInterval(checkvalid,1000);


        function test1(){
            var astring =  $('#context').wangEditor();
            //var astring = new String("<p>nwe<p> onr </p>end here</p>");
            astring =  astring.replace(/(^<p>)/g, "");
            return astring.replace(/(<\/p>$)/g, "");
    }

    alert(test1());


      /*  window.onload = function()
        {
        $("#hdin").attr("disabled", true);
        document.getElementById("title").oninput = function() {myFunction()};
        function myFunction() {

            var nm = document.getElementById("title");
            var text = editor.$txt.text();
            //alert(text+"||"+nm.value);
            if(text!="" && nm.value!="")
            {
                document.getElementById("hdin").disabled= false;
            }
            else
            {
                $("#hdin").attr("disabled", true);

            }
        }



};*/

        //window.onload = function()
       /* {
            function handin(){

            var nm = document.getElementById("title");
            var cnt = document.getElementById("context");
            //var bnm = document.getElementById("hdin");
            var text = editor.$txt.text();

            //alert(text);
            if(text!="" && nm.value!="")
             {
                alert("提交成功！");
                 return true;
             }

             else
             {
                 alert("标题，正文不能为空！");

                 return false;
             }

        }

        }*/

    </script>
</body>
</html>
